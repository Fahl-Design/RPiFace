#!/bin/bash
outlet=$1
onoff=$2
rawcode=""

declare -A outlets
outlets['AON']="330 4940 330 1000 320 1010 970 360 320 1010 310 1010 970 370 320 1010 970 360 320 1010 970 370 960 370 960 360 320 1010 970 380 310 1020 300 1020 960 370 960 380 310 1020 960 370 310 1010 970 380 300 1030 950 380 300 1020 960 380 950 370 310 1020"
outlets['AOFF']="320 4950 330 1000 320 1010 970 360 320 1010 320 1000 980 370 310 1010 320 1020 310 1010 970 370 320 1010 970 360 970 360 310 1030 960 370 960 360 970 360 320 1020 320 1010 970 360 310 1020 310 1040 300 1020 310 1020 310 1010 970 370 960 370 310 1020"
outlets['BON']="330 4950 320 1010 320 1000 980 350 330 1010 310 1010 980 360 320 1010 320 1010 320 1010 970 370 970 360 320 1010 970 360 970 370 970 360 310 1030 950 370 960 380 310 1020 960 370 310 1020 960 370 320 1020 310 1010 310 1020 960 380 310 1010 960 370"
outlets['BOFF']="320 4950 320 1010 320 1000 980 350 330 1000 320 1020 960 370 320 1020 310 1010 970 360 970 370 970 360 970 360 960 370 310 1030 310 1020 310 1020 960 360 970 370 310 1030 300 1020 310 1020 310 1030 310 1020 960 370 960 370 960 370 310 1010 970 370"
outlets['CON']="320 4950 980 350 970 360 970 360 320 1010 320 1010 970 370 960 370 310 1020 310 1020 310 1030 960 360 970 360 970 370 300 1030 960 370 310 1020 960 370 960 390 950 370 310 1020 960 370 300 1040 300 1030 950 380 300 1030 300 1030 300 1020 960 370"
outlets['COFF']="320 4950 970 360 970 360 970 360 310 1020 310 1010 970 370 970 360 970 360 970 360 320 1030 960 360 970 370 950 370 310 1040 950 370 960 370 310 1020 310 1030 960 370 960 370 300 1030 300 1030 960 370 960 370 310 1030 950 380 300 1020 960 370"

if [ -n "${outlets["$outlet$onoff"]}" ]
then
rawcode=${outlets["$outlet$onoff"]}
echo "Found rawcode, executing set outlet '$outlet' to state '$onoff'"
pilight-send -p raw -c "$rawcode"
else
echo "I don't know what you mean by set '$outlet' to '$onoff'"
echo "Either the array does not contain a code for '$outlet$onoff' or it is empty"
fi
exit 0
